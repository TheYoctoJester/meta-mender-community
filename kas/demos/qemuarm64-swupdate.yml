header:
  version: 14
  includes:
  - kas/include/mender-base.yml

repos:
  meta-openembedded:
    layers:
      meta-python:
      meta-networking:
      meta-filesystems:

  meta-swupdate:
    url: https://github.com/sbabic/meta-swupdate
    commit: 6918be849ddf1fed5b7a0173e51c7a136e8d4101

  meta-mender:
    layers:
      meta-mender-demo:
  
  meta-mender-community:
    layers:
      meta-mender-client-only:
      meta-mender-update-modules:
      kas/demos/meta-mender-swupdate:

local_conf_header:
  no-full-client: |
    MENDER_EFI_LOADER = ""
    MENDER_UPDATE_POLL_INTERVAL_SECONDS = "5"
    MENDER_INVENTORY_POLL_INTERVAL_SECONDS = "5"
    MENDER_RETRY_POLL_INTERVAL_SECONDS = "30"
  swupdate: |
    # Versioning env variables
    SWUPDATE_HARDWARE_VERSION = "1.0"
    SWUPDATE_SOFTWARE_VERSION = "1.0"

machine: qemuarm64-swupdate

target:
  - all-images